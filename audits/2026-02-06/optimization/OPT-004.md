# OPT-004: Unnecessary SVG Generation in Budget "No World Set" Path

## Impact
LOW

## Category
Wasteful Computation

## Location
- File: src/handlers/commands/budget.ts
- Function: handleFindSubcommand() (lines 133-151)

## Current Performance
When a user hasn't set their world, the handler:
1. Generates a "no world set" SVG image (~0.5ms)
2. Renders it to PNG via resvg-wasm (~50-100ms)
3. Returns a JSON response that never uses the PNG

This wastes ~50-100ms of CPU time and ~100KB of memory for every `/budget find` call from users without a configured world.

## Bottleneck Analysis
The `renderSvgToPng` function:
1. Initializes WASM if needed (first call only, ~10ms)
2. Creates a Resvg instance with font loading
3. Renders SVG to pixel buffer
4. Encodes as PNG

All of this work is discarded because the JSON response can't include file attachments.

## Proposed Optimization
Remove SVG/PNG generation entirely from this code path (this also fixes BUG-002):

```typescript
if (!world) {
  return ephemeralResponse(
    `**${t.t('budget.noWorldSet.title')}**\n\n${t.t('budget.noWorldSet.description')}`
  );
}
```

## Expected Improvement
- ~50-100ms CPU time saved per "no world" call
- ~100KB memory saved per call
- Also fixes the broken image issue (BUG-002)

## Trade-offs
- Loses the visual "no world set" image (text-only message instead)
- Minimal visual impact since the image was broken anyway

## Benchmark Approach
- N/A â€” straightforward computation removal
