# BUG-002: Budget "No World Set" Image Never Displays

## Severity
MEDIUM

## Type
Logic Error

## Location
- File: src/handlers/commands/budget.ts
- Line(s): 133-151
- Function: handleFindSubcommand()

## Description
When a user hasn't set their world preference, the handler generates an SVG and renders it to PNG, but then returns a JSON response (`Response.json()`) that references `attachment://budget.png` without actually attaching the file. Discord initial interaction responses (type 4) require multipart form data to include file attachments --- a JSON body cannot carry file data.

The result: the embed shows a broken image, and the PNG rendering was wasted CPU/memory.

## Reproduction Scenario
1. User runs `/budget find target_dye:Jet Black` without ever setting a world
2. Bot generates SVG + PNG for the "no world set" message
3. Bot returns JSON response with `image: { url: 'attachment://budget.png' }`
4. Discord shows embed with broken image placeholder

## Evidence
```typescript
// budget.ts:133-151
if (!world) {
  // SVG is generated and PNG rendered...
  const svg = generateNoWorldSetSvg(IMAGE_WIDTH);
  const pngBuffer = await renderSvgToPng(svg, { scale: 2 });
  // ...but pngBuffer is NEVER used in the response below:
  return Response.json({
    type: 4,
    data: {
      embeds: [{
        title: t.t('budget.noWorldSet.title'),
        description: t.t('budget.noWorldSet.description'),
        color: 0xfee75c,
        image: { url: 'attachment://budget.png' },  // References non-existent attachment
      }],
      flags: 64,
    },
  });
}
```

## Suggested Fix
Either remove the image from the response (since the description conveys the message), or use a deferred response with `editOriginalResponse` to send the file:

```typescript
// Option 1: Remove the image entirely (simplest)
if (!world) {
  return ephemeralResponse(
    `**${t.t('budget.noWorldSet.title')}**\n\n${t.t('budget.noWorldSet.description')}`
  );
}

// Option 2: Send as multipart with file
// (would require changing to deferred response pattern)
```

## Why It's Hidden
- Developers may test with world already set
- The embed text still displays correctly, just with a broken image
- The broken image icon is small in Discord ephemeral messages and easy to miss
